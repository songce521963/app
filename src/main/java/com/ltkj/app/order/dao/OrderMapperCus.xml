<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ltkj.app.order.dao.OrderMapperCus" >
  <resultMap id="BaseResultMap" type="com.ltkj.app.order.model.OrderModel">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="order_id" property="orderId" jdbcType="VARCHAR" />
    <result column="customer_name" jdbcType="VARCHAR" property="customerName" />
    <result column="customer_phone" jdbcType="VARCHAR" property="customerPhone" />
    <result column="customer_id" jdbcType="VARCHAR" property="customerId" />
    <result column="goods_price" jdbcType="DECIMAL" property="goodsPrice" />
    <result column="postage" jdbcType="DECIMAL" property="postage" />
    <result column="order_price" property="orderPrice" jdbcType="DECIMAL" />
    <result column="status" property="status" jdbcType="CHAR" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="Is_Active" property="isActive" jdbcType="VARCHAR" />
    <result column="CREATE_DT" property="createDt" jdbcType="TIMESTAMP" />
    <result column="CREATE_OP" property="createOp" jdbcType="VARCHAR" />
    <result column="CREATE_PG" property="createPg" jdbcType="VARCHAR" />
    <result column="UPDATE_DT" property="updateDt" jdbcType="TIMESTAMP" />
    <result column="UPDATE_OP" property="updateOp" jdbcType="VARCHAR" />
    <result column="UPDATE_PG" property="updatePg" jdbcType="VARCHAR" />
    <result column="status_info" property="statusInfo" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ORD.order_id,
    ORD.customer_name,
    ORD.customer_phone,
    ORD.customer_id,
    ORD.goods_price,
    ORD.postage,
    ORD.order_price,
    ORD.`status`,
    ORD.description,
    ORD.Is_Active,
    ORD.CREATE_DT,
    ORD.CREATE_OP,
    ORD.CREATE_PG,
    ORD.UPDATE_DT,
    ORD.UPDATE_OP,
    ORD.UPDATE_PG,
    HM.value status_info
  </sql>
  <select id="queryOrderList" resultMap="BaseResultMap" parameterType="com.ltkj.app.order.model.OrderModel">
         SELECT
             <include refid="Base_Column_List"/>
         FROM
             S_ORDER ORD LEFT JOIN M_HASH_MAP HM
         ON  (ORD.`status` = HM.`KEY`
         AND HM.TYPE_NAME = 'order_status')
        <where>
              <if test="orderId != null and orderId != ''" >
                and ORD.order_id like CONCAT(#{orderId,jdbcType=VARCHAR}, '%')
              </if>
              <if test="customerName != null and customerName != ''" >
		        and ORD.customer_name like CONCAT(#{customerName,jdbcType=VARCHAR}, '%')
		      </if>
		      <if test="customerPhone != null and customerPhone != ''" >
		        and ORD.customer_phone like CONCAT(#{customerPhone,jdbcType=VARCHAR}, '%')
		      </if>
		      <if test="customerId != null and customerId != ''" >
		        and ORD.customer_id like CONCAT(#{customerId,jdbcType=VARCHAR}, '%')
		      </if>
		      <if test="orderPriceFrom != null and orderPriceFrom != ''" >
		        and ORD.order_price &gt;= #{orderPriceFrom,jdbcType=INTEGER}
		      </if>
		      <if test="orderPriceTo != null and orderPriceTo != ''" >
                and ORD.order_price &lt;= #{orderPriceTo,jdbcType=INTEGER}
              </if>
		      <if test="status != null and status != ''" >
		        and ORD.status = #{status,jdbcType=CHAR}
		      </if>
		      <if test="createDateFrom != null and createDateFrom != ''" >
		        and ORD.CREATE_DT &gt;= #{createDateFrom,jdbcType=TIMESTAMP}
		      </if>
		      <if test="createDateTo != null and createDateTo != ''" >
                and ORD.CREATE_DT &lt;= #{createDateTo,jdbcType=TIMESTAMP}
              </if>
              <if test="companyId != null and companyId != ''" >
              	and COMPANY_ID = #{companyId}
              </if>
        </where>
    </select>
    
    <select id="queryOrder" resultMap="BaseResultMap" parameterType="Order">
         SELECT
             <include refid="Base_Column_List"/>
         FROM
             S_ORDER ORD LEFT JOIN M_HASH_MAP HM
         ON  (ORD.status = HM.KEY
         AND HM.TYPE_NAME = 'order_status')
        <where>
              <if test="orderId != null and orderId !=''">
                and ORD.order_id = #{orderId,jdbcType=VARCHAR}
              </if>
              
        </where>
    </select>
</mapper>